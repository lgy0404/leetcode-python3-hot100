**02 leetcode 哈希 0049 字母异位词分组 230802**

[toc]

# 一、题目描述

[49. 字母异位词分组 - 力扣（LeetCode）](https://leetcode.cn/problems/group-anagrams/?envType=study-plan-v2&envId=top-100-liked)

给你一个字符串数组，请你将 **字母异位词** 组合在一起。可以按任意顺序返回结果列表。

**字母异位词** 是由重新排列源单词的所有字母得到的一个新单词。

 

**示例 1:**

```
输入: strs = ["eat", "tea", "tan", "ate", "nat", "bat"]
输出: [["bat"],["nat","tan"],["ate","eat","tea"]]
```

**示例 2:**

```
输入: strs = [""]
输出: [[""]]
```

**示例 3:**

```
输入: strs = ["a"]
输出: [["a"]]
```

 

**提示：**

- `1 <= strs.length <= 104`
- `0 <= strs[i].length <= 100`
- `strs[i]` 仅包含小写字母



# 二、我的题解

两个字符串互为`字母异位词`，当且仅当两个字符串`包含的字母相同`。同一组字母异位词中的字符串具备相同点，可以使用<u>相同点</u>作为**一组字母异位词的标志**，使用**哈希表存储**每一组字母异位词，**哈希表的键为一组字母异位词的标志**，哈希表的**值为一组字母异位词列表**。

1. **`遍历每个字符串`**，对于每个字符串，**得到**该字符串所在的一组**字母异位词的标志**
2. 将**当前字符串**`加入`该组字母异位词的`列表`中
3. 遍历全部字符串之后，哈希表中的**每个键值对即为一组字母异位词**。

## **排序**

由于互为字母异位词的两个字符串包含的字母相同，因此对两个字符串分别进行排序之后得到的字符串一定是相同的，故可以将`排序之后的字符串`作为`哈希表的键`。

| 哈希表的键                                     | 哈希表的值                            |
| ---------------------------------------------- | ------------------------------------- |
| 将输入的字符列表中的字符串遍历，排序后的字符串 | 互为字母异位词的$n$个字符串组成的列表 |



### **python3程序**


```python
class Solution:
    def groupAnagrams(self, strs: List[str]) -> List[List[str]]:
        mp = collections.defaultdict(list)

        for st in strs:
            key = "".join(sorted(st))
            mp[key].append(st) #哈希表的值是字母异位词列表，此处为在列表中添加新的值的操作
        
        return list(mp.values())

```

- 这是一个 Python 的 Solution 类，其中包含一个名为 `groupAnagrams` 的方法。该方法接收一个字符串列表 `strs` 作为输入，并返回按照一定规则分组后的字符串列表列表。

- `具体实现`

1. 创建一个 `mp` 字典对象，这是一个 defaultdict 对象（自动初始化为 list 类型）。这个字典用于存储每个分组的异位词列表。
2. 遍历输入的字符串列表 `strs` 中的每个字符串 `st`。
3. 对每个字符串 `st` 进行排序，并将排序后的字符串作为键 `key`。
4. 将原始字符串 `st` 添加到键 `key` 对应的列表中，以实现将异位词分组的目的。
5. 遍历完所有字符串后，返回 `mp` 字典的值，即包含分组异位词列表的列表。

- `总结`

	这个方法使用了 defaultdict 来构建一个以排序后的字符串为键，对应值为包含异位词列表的字典。通过遍历输入的字符串列表，将异位词分别添加到对应的键所对应的列表中，从而实现了将异位词进行分组的功能。最后，返回所有分组后的异位词列表组成的列表。

### **复杂度分析**【均有待考证】

- **时间**复杂度：**$O(1)$**
- **空间**复杂度：**$O(n)$**

![image-20230803102618598](C:/Users/William/AppData/Roaming/Typora/typora-user-images/image-20230803102618598.png)

### **思考与收获**

#### 进一步解释：`mp = collections.defaultdict(list)`，什么是 `collections` ？什么是`defaultdict`？

  - `mp = collections.defaultdict(list)` 这行代码创建了一个 `defaultdict` 对象，`defaultdict` 是 Python 标准库 `collections` 中的一种字典类型，它是内建字典 `dict` 的子类。
  - `defaultdict` 的创建方式如上所示，括号中的 `list` 是一个参数，它指定了默认值的类型。在这个例子中，我们传递了 `list` 类型作为参数，这意味着在访问字典中不存在的键时，将创建一个空列表作为该键的默认值。
  - 例如，当我们使用 `mp[key]` 访问 `mp` 中某个键 `key` 时，如果该键不存在，`defaultdict` 将自动创建一个空列表作为默认值，并将其关联到该键 `key` 上。如果键 `key` 已经存在，就返回与该键相关联的列表。
  - 这在上述代码中非常有用，因为它允许我们按照键-列表的方式轻松地存储和组织数据。在这个例子中，我们使用 `defaultdict(list)` 来构建一个字典 `mp`，其中键是字符串的排序后的版本，而值是包含原始字符串的列表。这样一来，我们可以方便地将具有相同字母构成的字符串（即异位词）分组在一起。
  - 如果我们使用普通的 `dict` 而不是 `defaultdict(list)`，那么在我们首次访问某个键时，由于该键不存在，会抛出 `KeyError` 异常。而使用了 `defaultdict(list)` 后，我们就不需要担心键不存在的问题，因为它会自动为我们创建一个空列表作为默认值，使得代码更加简洁和健壮。

#### 进一步解释 `key = "".join(sorted(st))`，为什么不能写成`key = (sorted(st))` ？

  - `key = "".join(sorted(st))` 这行代码的目的是将字符串 `st` 排序后得到的字符数组转换回字符串，并将该字符串赋值给变量 `key`。让我们逐步解释这行代码的含义：

- `sorted(st)`: 这一部分首先对字符串 `st` 进行排序。`sorted()` 函数将字符串中的字符按照字母顺序进行排序，并返回一个新的字符数组（列表）。 注意：`sorted()` 函数不会改变原始字符串 `st`，而是返回一个新的已排序的字符数组。

- `"".join(sorted(st))`: 在这里，我们使用了空字符串 `""` 的 `join()` 方法来将已排序的字符数组连接起来，并生成一个新的字符串。`join()` 方法将数组中的元素以指定的字符串（在这里是空字符串）连接在一起，形成一个新的字符串。

- 为什么不能直接写成 `key = (sorted(st))` 呢？

- 如果我们使用 `key = (sorted(st))`，则 `key` 将会是一个已排序的字符数组（列表），而不是一个字符串。在我们的目标中，我们需要一个字符串作为 `key`，以便将异位词分组在一起。因此，我们需要将排序后的字符数组转换回字符串，才能正确地使用它作为字典的键。

- 总结：`key = "".join(sorted(st))` 的目的是将字符串 `st` 排序后得到的字符数组转换为字符串，并将其作为字典的键，以实现按照排序后的字符串来分组异位词的功能。而直接使用 `key = (sorted(st))` 会得到一个字符数组，无法满足分组需求。

	> 将 `key = "".join(sorted(st))` 替换成 `key = str(sorted(st))` 或者 `key = tuple(sorted(st))` 同样可以ac

#### 字符数组为什么不能作为字典的键？

  - 在 `**Python 中，字典的键必须是不可变的数据类型**`。这是因为字典是一种哈希表的实现，在哈希表中，键的唯一性和不可变性是必要的。
  - `字符数组（列表）`是`可变`的数据类型，因为你可以通过索引修改列表中的元素，例如 `list[0] = "new_value"`。由于列表是可变的，它们不符合字典键的要求。
  - 相反，`字符串`是`不可变`的数据类型。一旦创建了一个字符串，就不能更改其内容。因此，字符串是可以作为字典的键的。

## **计数**

由于互为字母异位词的两个字符串包含的字母相同，因此两个字符串中的`相同字母出现的次数`一定是相同的，故可以将每个字母出现的次数`使用字符串表示`，作为哈希表的键。

由于字符串只包含小写字母，因此对于每个字符串，可以==使用长度为 26 的数组记录每个字母出现的次数(一共26个英文字母)==。需要注意的是，在使用数组作为哈希表的键时，不同语言的支持程度不同，因此不同语言的实现方式也不同。

| 哈希表的键                                                   | 哈希表的值                            |
| ------------------------------------------------------------ | ------------------------------------- |
| 自定义的长度为26数组，数组记录各个输入的字符串中每个字母出现的次数 | 互为字母异位词的$n$个字符串组成的列表 |

### **python3程序**

```python
class Solution:
    def groupAnagrams(self, strs: List[str]) -> List[List[str]]:
        mp = collections.defaultdict(list)

        for st in strs:
            counts = [0] * 26 #一共有26个英文字母
            for ch in st:
                counts[ord(ch) - ord("a")] += 1
            # 需要将 list 转换成 tuple 才能进行哈希
            mp[tuple(counts)].append(st)
        
        return list(mp.values())
```


这段代码是一个Python的类`Solution`，其中定义了一个名为`groupAnagrams`的方法。这个方法接受一个字符串列表`strs`作为输入，并返回一个字符串列表的列表作为输出。

代码的功能是将输入的字符串列表中，具有相同字符组成的字符串归类到一起，形成一个个列表。具体步骤如下：

1. 首先创建一个名为`mp`的字典，并使用`collections.defaultdict(list)`来创建一个默认值为列表的字典。这样的字典在没有某个键的时候，会自动创建并将值初始化为空列表。

2. 然后对于输入的字符串列表中的每一个字符串`st`，进行以下操作：

	a. 创建一个长度为26的列表`counts`，并将所有元素初始化为0。这个`counts`列表用于记录每个字母在字符串`st`中出现的次数。

	b. 遍历字符串`st`中的每个字符`ch`，并统计其出现的次数，将次数记录在`counts`列表中，计算方法是通过字符的ASCII码减去字符'a'的ASCII码，得到一个在0到25之间的索引，用来表示每个字母的位置。

	c. 将`counts`列表转换为元组，并将字符串`st`添加到字典`mp`的对应元组键所对应的列表中。因为字典的键必须是不可变的，而列表是可变的，所以这里使用元组来作为键。

3. 最后，将字典`mp`中的所有值转换为列表，并作为结果返回。

这个方法的作用是将具有相同字母组成的字符串进行分组，并返回一个由这些分组列表组成的列表。

### 复杂度分析

- **时间**复杂度：**$O(1)$**
- **空间**复杂度：**$O(n)$**

![image-20230803102549213](C:/Users/William/AppData/Roaming/Typora/typora-user-images/image-20230803102549213.png)

### **思考与收获**

#### 进一步理解 `ord()` 函数？

- `ord()` 是Python中的一个内置函数，用于返回表示单个字符的Unicode码点（整数）。它接受一个字符作为参数，并返回该字符对应的Unicode码点。
- 在Python中，每个字符都有一个对应的整数值，称为Unicode码点。Unicode是一种字符编码标准，它为世界上几乎所有的字符都定义了一个唯一的标识符，这些标识符就是Unicode码点。
- 例如，`ord('A')`会返回整数65，因为大写字母'A'的Unicode码点是65。类似地，`ord('a')`会返回整数97，因为小写字母'a'的Unicode码点是97。
- 使用`ord()`函数通常是为了将字符转换为对应的整数值，以便进行数字的处理或者用于一些特定的算法和编程任务。



参考：力扣官方题解 [链接：](https://leetcode.cn/problems/group-anagrams/solutions/520469/zi-mu-yi-wei-ci-fen-zu-by-leetcode-solut-gyoc/) 